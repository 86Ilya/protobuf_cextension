# Protobuf to file. C extension.
Данное расширение позволяет записывать protobuf сообщений в файл и так же читать их.
Расширение написано на Си для Python 2.7

## Установка и запуск
Для установки данного расширения, необходимо изначально настроить окружение для сборки.<br>
Для этого в проекте имеется `Dockerfile`.
Запустить создание окружения можно выполнив из папки проекта команду:
```docker build cext .```<br>
Для "ручной" сборки достаточно просто войти в окружение командой:
```docker run -it cext "bash"```
и выполнить нехитрые команды:
```
python setup.py build
python setup.py install
```
После которых расширение будет установлено в систему под именем **pb**.
Модуль содержит две функции:
```
deviceapps_xwrite_pb(iterator, filepath)
deviceapps_xread_pb(filepath)
```

Первая функция конвертирует полученный на вход итератор со словарями в protobuf сообщения и записывает их в указанный файл.
Вторая, соответственно, читает файл с protobuf сообщениями, конвертирует их обратно, и возвращает итератор со словарями.

## Запуск тестов
Для сборки и запуска тестов достаточно запустить команду:
```docker run -it cext "/root/cextension/start.sh"```
